<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Engine | Kaizaro</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="exam-engine.js" defer></script>

    <style>
        :root {
            --bg-body: #050505; --bg-card: #121212; --border: #262626; 
            --text-main: #e5e5e5; --text-muted: #888;
            --primary: #3b82f6; --success: #10b981; 
            --warning: #f59e0b; --danger: #ef4444;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; user-select: none; }
        
        body { 
            background-color: var(--bg-body); color: var(--text-main); 
            height: 100vh; display: grid; grid-template-rows: 60px 1fr 70px; overflow: hidden;
        }

        /* HEADER */
        header {
            border-bottom: 1px solid var(--border); background: var(--bg-card);
            display: flex; justify-content: space-between; align-items: center; padding: 0 24px;
        }
        .timer-box {
            font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700;
            color: var(--text-main); background: #222; padding: 8px 16px; border-radius: 6px;
            border: 1px solid #333; display: flex; align-items: center; gap: 8px;
        }
        .timer-warning { color: var(--danger); border-color: var(--danger); animation: pulse 1s infinite; }

        /* MAIN LAYOUT */
        .exam-layout { display: grid; grid-template-columns: 260px 1fr; height: 100%; overflow: hidden; }
        
        /* SIDEBAR (Question Palette) */
        aside { 
            border-right: 1px solid var(--border); background: #080808; 
            padding: 20px; display: flex; flex-direction: column; overflow-y: hidden;
        }
        .palette-grid { 
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; 
            overflow-y: auto; padding-right: 5px; flex: 1; align-content: start;
        }
        .q-btn {
            aspect-ratio: 1; border-radius: 4px; border: 1px solid var(--border);
            background: #1a1a1a; color: #888; font-weight: 600; cursor: pointer;
            display: grid; place-items: center; transition: 0.2s; font-size: 0.85rem;
        }
        .q-btn:hover { border-color: var(--primary); color: white; }
        .q-btn.current { border-color: var(--primary); background: rgba(59, 130, 246, 0.2); color: white; }
        .q-btn.answered { background: var(--success); color: black; border-color: var(--success); }
        .q-btn.review { background: var(--warning); color: black; border-color: var(--warning); }

        /* QUESTION AREA */
        .question-area { padding: 40px; overflow-y: auto; max-width: 900px; margin: 0 auto; width: 100%; }
        .q-header { 
            display: flex; justify-content: space-between; margin-bottom: 20px; 
            border-bottom: 1px solid var(--border); padding-bottom: 15px; 
        }
        .q-text { font-size: 1.1rem; line-height: 1.6; margin-bottom: 30px; }
        
        .options-grid { display: flex; flex-direction: column; gap: 12px; }
        .option-card {
            display: flex; align-items: center; padding: 16px 20px;
            background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px;
            cursor: pointer; transition: 0.2s;
        }
        .option-card:hover { border-color: #555; background: #1a1a1a; }
        .option-card.selected { border-color: var(--primary); background: rgba(59, 130, 246, 0.1); }
        .option-circle {
            width: 20px; height: 20px; border-radius: 50%; border: 2px solid #555;
            margin-right: 15px; display: grid; place-items: center; flex-shrink: 0;
        }
        .option-card.selected .option-circle { border-color: var(--primary); }
        .option-card.selected .option-circle::after {
            content: ''; width: 10px; height: 10px; background: var(--primary); border-radius: 50%;
        }

        /* FOOTER CONTROLS */
        .controls {
            background: var(--bg-card); border-top: 1px solid var(--border);
            padding: 0 40px; display: flex; justify-content: space-between; align-items: center;
            grid-column: 1 / -1; z-index: 10;
        }
        .btn { padding: 10px 24px; border-radius: 6px; font-weight: 600; cursor: pointer; border: none; font-size: 0.9rem; transition: 0.2s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: #2563eb; }
        .btn-outline { background: transparent; border: 1px solid var(--border); color: #ccc; }
        .btn-outline:hover { border-color: #666; color: white; }
        .btn-warning { background: transparent; border: 1px solid var(--warning); color: var(--warning); }
        .btn-warning:hover { background: rgba(245, 158, 11, 0.1); }
        .btn-danger { background: var(--danger); color: white; }
        .btn-danger:hover { background: #dc2626; }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        
        /* Fullscreen Overlay for Security */
        #security-overlay {
            position: fixed; inset: 0; background: black; z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            display: none;
        }
    </style>
</head>
<body>

    <header>
        <div style="font-weight:700; font-size:1.1rem; display:flex; align-items:center; gap:10px;">
            <i data-lucide="layers"></i> KAIZARO EXAM ENGINE
        </div>
        <div style="text-align:center;">
            <div style="font-size:0.75rem; color:var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">Subject</div>
            <div id="exam-subject" style="font-weight:600;">Loading...</div>
        </div>
        <div class="timer-box" id="timer-display">
            <i data-lucide="clock" size="16"></i> 00:00
        </div>
    </header>

    <div class="exam-layout">
        <aside>
            <div style="margin-bottom:15px; font-size:0.8rem; color:var(--text-muted); text-transform: uppercase; font-weight: 600;">Question Palette</div>
            <div class="palette-grid" id="palette-container">
                </div>
            <div style="margin-top:auto; font-size:0.7rem; color:#444; text-align:center; padding-top: 10px;">
                Secure Browser Active â€¢ v2.4
            </div>
        </aside>

        <div class="question-area">
            <div class="q-header">
                <span style="font-size:1.2rem; font-weight:700; color:var(--primary);">Question <span id="q-num">1</span></span>
                <span style="font-size:0.85rem; color:var(--text-muted); background: #1a1a1a; padding: 4px 10px; border-radius: 4px;">+4 Marks / -1 Negative</span>
            </div>
            
            <div class="q-text" id="q-content">
                Loading Question...
            </div>

            <div class="options-grid" id="options-container">
                </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn btn-warning" onclick="ExamEngine.markForReview()">Mark for Review</button>
        <div style="display:flex; gap:15px;">
            <button class="btn btn-outline" onclick="ExamEngine.prevQuestion()">Previous</button>
            <button class="btn btn-primary" onclick="ExamEngine.nextQuestion()" id="btn-next">Save & Next</button>
            <button class="btn btn-danger" onclick="ExamEngine.submitExam()" id="btn-submit" style="display:none;">Submit Test</button>
        </div>
    </div>

    <div id="security-overlay">
        <i data-lucide="shield-alert" size="64" color="#ef4444"></i>
        <h2 style="color:white; margin-top:20px;">Security Violation Detected</h2>
        <p style="color:#888; margin-bottom: 20px;">Please return to full screen mode to continue your exam.</p>
        <button class="btn btn-primary" onclick="document.documentElement.requestFullscreen()">Resume Exam</button>
    </div>
<script src="exam-engine.js"></script>
</body>
</html>